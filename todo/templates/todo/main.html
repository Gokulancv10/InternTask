{% extends 'todo/index.html' %}
{% load crispy_forms_tags %}


{% block content %}

	<div class="modal" id="ModalTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>

				<div class="modal-body">
					<h5>Hello</h5>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>  

	<div class="center-column">
			<h5 class="card-title">Create your List</h5>
				
			<form action="" method="POST" id='form-create'>
				{% csrf_token %}		

				<div class="input-group-append">
					{{ todo_form.title}}
					<button type="submit" class="form-control btn btn-primary mb-3 mr-sm-2" id="addItem">Add Items</button>
				</div>
			</form>
	</div>
		
	
	<div class="row">
		<div class="col-sm-6">
			<div class="card">
				<div class="card-body">

					<h4 class="card-title">Upcoming Items</h4><hr>

		            <ul class="list-group" id="upcomingItems">

		                {% for i in page_obj %}

			                {% for j in i.tasks.all %}

								<li class="list-group-item list-group-item-primary mb-2" id="upcomingItem">{{ i.title }}

									<div class="float-right">
										<button type="submit" class="btn btn-sm btn-danger ml-1 mt-2 mr-1 mb-1"><a href="{% url 'delete_todo' i.id %}">❌</a></button>									
									</div>

									<div class="float-right">
										<button type="submit" class="btn btn-sm btn-success ml-1 mt-2 mr-1 mb-1" id="update_btn"><a href="{% url 'update_todo' i.id %}">Update</a></button>
									</div>

									<div class="float-right">							
										<button type="submit" class="btn btn-sm btn-dark ml-1 mt-2 mr-1 mb-1" id="completed_btn"><a href="{% url 'completed_todo' i.id %}">Completed</a></button>
									</div>			

									<div class="float-right">							
										<button type="submit" class="btn btn-sm btn-primary ml-1 mt-2 mr-1 mb-1"><a href="{% url 'addTodo' i.id %}">Add</a></button>
									</div>	

									{% if i.tasks.all %}
										<div class="card mt-4">
											<ul class="list-group">

												<li class="list-group-item list-group-item-danger mt-1 ml-1 mr-1 mb-.1" id="upcomingItem">
													{{ j.heading }}
													<div class="float-right">
														<button type="submit" class="btn btn-sm btn-danger ml-1 mt-2 mr-1 mb-1"><a href="{% url 'delete_todo' j.id %}">❌</a></button>									
													</div>

													<div class="float-right">							
														<button type="submit" class="btn btn-sm btn-dark ml-1 mt-2 mr-1 mb-1" id="completed_btn"><a href="{% url 'completed_todo' j.id %}">Completed</a></button>
													</div>	
												</li>
												
											</ul>
										</div>	
									{% endif %}											
								</li>
									
		                	{% endfor %}

	                	{% endfor %}
           		
	                	
	           		</ul><hr>

					<ul class="pagination justify-content-center">

						{% if page_obj.has_previous %}

							<li class="page-item {% if page_obj.page_number == page_num %} active {% endif %}">
			        			<a class="page-link" href="?upcoming={{ page_obj.previous_page_number }}&completed={{page_num2}}">&laquo</a>
			    			</li>

			    		{% endif %}

						{% for i in pagi1.page_range %}

				    		<li class="page-item {% if i == page_num %} active {% endif %}">
			        			<a class="page-link" href="?upcoming={{ i }}&completed={{page_num2}}">{{ i }}</a>
				    		</li>

			    		{% endfor %}

			    		{% if page_obj.has_next %}

							<li class="page-item {% if page_obj.page_number == page_num %} active {% endif %}">
			        			<a class="page-link" href="?upcoming={{ page_obj.next_page_number }}&completed={{page_num2}}">&raquo</a>
			    			</li>

			    		{% endif %}
			    	</ul>
			         
				</div>
								
			</div>
		</div>




		<div class="col-sm-6">
			<div class="card">
				<div class="card-body">

			    	<h4 class="card-title">Completed Items</h4><hr>
					
		            <ul class="list-group">

		                {% for i in page_obj2 %}
			                {% for j in i.tasks.all %}
				                {% if j.completed or i.completed %}

									<li class="list-group-item list-group-item-primary mb-2" id="upcomingItem">{{ i.title }}
										<div class="float-right">
											<button type="submit" class="btn btn-sm btn-danger ml-2 mt-2 mr-2 mb-1"><a href="{% url 'delete_todo' i.id %}">❌</a></button>									
										</div>

										{% if i.tasks.all %}
											<div class="card mt-4">
												<ul class="list-group">

													<li class="list-group-item list-group-item-danger mt-1 ml-1 mr-1 mb-.1">
														{{ j.heading }}

														<div class="float-right">
															<button type="submit" class="btn btn-sm btn-danger ml-1 mt-2 mr-1 mb-1"><a href="{% url 'delete_todo' j.id %}">❌</a></button>									
														</div>
													</li>
												</ul>
											</div>
										{% endif %}													
									</li>
								{% endif %}
							{% endfor %}
								
	                	{% endfor %}               		
	                	
	           		</ul>
	           		<hr>

					<ul class="pagination justify-content-center">

						{% if page_obj2.has_previous %}

							<li class="page-item {% if page_obj2.page_number == page_num %} active {% endif %}">
			        			<a class="page-link" href="?completed={{ page_obj2.previous_page_number }}&upcoming={{page_num}}">&laquo</a>
			    			</li>

			    		{% endif %}

						{% for i in pagi2.page_range %}

				    		<li class="page-item {% if i == page_num2 %} active {% endif %}">
			        			<a class="page-link" href="?completed={{ i }}&upcoming={{page_num}}">{{ i }}</a>
				    		</li>

			    		{% endfor %}

			    		{% if page_obj2.has_next %}

							<li class="page-item {% if page_obj2.page_number == page_num %} active {% endif %}">
			        			<a class="page-link" href="?completed={{ page_obj2.next_page_number }}&upcoming={{page_num}}">&raquo</a>
			    			</li>

			    		{% endif %}

			    	</ul>	           		
			          					
				</div>
			</div>
		</div>
	</div>
			
{% endblock %}
